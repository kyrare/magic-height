!function(t){"use strict";var i={child:"div",line:"auto",resize:!0,load:!0},e=function(e,n){this.element=e,this.options=t.extend({},i,n),this.init()};e.prototype={init:function(){this.elements=this.element.find(this.options.child),this._setHeight(),this.options.resize&&t(window).on("resize",t.proxy(this._setHeight,this)),this.options.onload&&t(window).on("load",t.proxy(this._setHeight,this))},update:function(){this.elements=this.element.find(this.options.child),this._setHeight()},_getElementsInLine:function(){var i;if("all"===this.options.line)i=this.elements.length;else if("number"===this.options.line&&this.options.line%1==0&&this.options.line>0)i=this.options.line;else{var e=this.elements.first().offset().top,n=0;this.elements.each(function(){var i=t(this).offset().top;if(e!==i)return!1;n++,e=i}),i=n}return i},_setHeight:function(){var i=this,e=0,n=this._getElementsInLine();this.elements.css("height","").each(function(s){var h=t(this).height();if(h>e&&(e=h),s>0&&s%n==n-1)i.elements.slice(s-n+1,s+1).height(e),e=0;else if(s===i.elements.length-1){var o=s%n+1;i.elements.slice(-o).height(e),e=0}})}},t.fn.magicHeight=function(i){if(void 0===i||"object"==typeof i)this.each(function(){t(this).data("plugin_magicHeight",new e(t(this),i))});else if("string"==typeof i&&"_"!==i[0]&&"init"!==i){var n;return this.each(function(){var s=t(this).data("plugin_magicHeight");s instanceof e&&"function"==typeof s[i]&&(n=s[i].apply(s,Array.prototype.slice.call(arguments,1)))}),void 0!==n?n:this}return this}}(jQuery);